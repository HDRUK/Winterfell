!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("lodash")):"function"==typeof define&&define.amd?define(["React","lodash"],t):"object"==typeof exports?exports.winterfell=t(require("react"),require("lodash")):e.winterfell=t(e.React,e._)}(window,(function(e,t){return function(e){var t={};function s(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,s),n.l=!0,n.exports}return s.m=e,s.c=t,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(r,n,function(t){return e[t]}.bind(null,n));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=7)}([function(t,s){t.exports=e},function(e,s){e.exports=t},function(e,t,s){(function(e,t){
/*!
 * Copyright (c) 2015 Chris O'Hara <cohara87@gmail.com>
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 */
e.exports=function(r){"use strict";r={version:"4.9.0",coerce:!0};for(var n,i=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~]+$/i,a=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f]))*$/i,o=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+$/i,l=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))*$/i,p=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~\.\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~\.\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF\s]*<(.+)>$/i,u=/^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|6(?:011|5[0-9][0-9])[0-9]{12}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|(?:2131|1800|35\d{3})\d{11})$/,d=/^[A-Z]{2}[0-9A-Z]{9}[0-9]$/,h=/^(?:[0-9]{9}X|[0-9]{10})$/,c=/^(?:[0-9]{13})$/,f=/^([0-9a-fA-F][0-9a-fA-F]:){5}([0-9a-fA-F][0-9a-fA-F])$/,v=/^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/,m=/^[0-9A-F]{1,4}$/i,g={3:/^[0-9A-F]{8}-[0-9A-F]{4}-3[0-9A-F]{3}-[0-9A-F]{4}-[0-9A-F]{12}$/i,4:/^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,5:/^[0-9A-F]{8}-[0-9A-F]{4}-5[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,all:/^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i},b={"en-US":/^[A-Z]+$/i,"de-DE":/^[A-ZÄÖÜß]+$/i,"es-ES":/^[A-ZÁÉÍÑÓÚÜ]+$/i,"fr-FR":/^[A-ZÀÂÆÇÉÈÊËÏÎÔŒÙÛÜŸ]+$/i,"nl-NL":/^[A-ZÉËÏÓÖÜ]+$/i,"pt-PT":/^[A-ZÃÁÀÂÇÉÊÍÕÓÔÚÜ]+$/i,"ru-RU":/^[А-ЯЁа-яё]+$/i},y={"en-US":/^[0-9A-Z]+$/i,"de-DE":/^[0-9A-ZÄÖÜß]+$/i,"es-ES":/^[0-9A-ZÁÉÍÑÓÚÜ]+$/i,"fr-FR":/^[0-9A-ZÀÂÆÇÉÈÊËÏÎÔŒÙÛÜŸ]+$/i,"nl-NL":/^[0-9A-ZÉËÏÓÖÜ]+$/i,"pt-PT":/^[0-9A-ZÃÁÀÂÇÉÊÍÕÓÔÚÜ]+$/i,"ru-RU":/^[0-9А-ЯЁа-яё]+$/i},w=["AU","GB","HK","IN","NZ","ZA","ZM"],x=0;x<w.length;x++)b[n="en-"+w[x]]=b["en-US"],y[n]=y["en-US"];var q=/^[-+]?[0-9]+$/,E=/^(?:[-+]?(?:0|[1-9][0-9]*))$/,A=/^(?:[-+]?(?:[0-9]+))?(?:\.[0-9]*)?(?:[eE][\+\-]?(?:[0-9]+))?$/,I=/^[0-9A-F]+$/i,F=/^[-+]?([0-9]+|\.[0-9]+|[0-9]+\.[0-9]+)$/,C=/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i,S=/^[\x00-\x7F]+$/,_=/[^\x00-\x7F]/,P=/[^\u0020-\u007E\uFF61-\uFF9F\uFFA0-\uFFDC\uFFE8-\uFFEE0-9a-zA-Z]/,k=/[\u0020-\u007E\uFF61-\uFF9F\uFFA0-\uFFDC\uFFE8-\uFFEE0-9a-zA-Z]/,B=/[\uD800-\uDBFF][\uDC00-\uDFFF]/,D=/^(?:[A-Z0-9+\/]{4})*(?:[A-Z0-9+\/]{2}==|[A-Z0-9+\/]{3}=|[A-Z0-9+\/]{4})$/i,T={"en-US":/^(\+?1)?[2-9]\d{2}[2-9](?!11)\d{6}$/,"de-DE":/^(\+?49[ \.\-])?([\(]{1}[0-9]{1,6}[\)])?([0-9 \.\-\/]{3,20})((x|ext|extension)[ ]?[0-9]{1,4})?$/,"el-GR":/^(\+?30)?(69\d{8})$/,"en-AU":/^(\+?61|0)4\d{8}$/,"en-GB":/^(\+?44|0)7\d{9}$/,"en-HK":/^(\+?852\-?)?[569]\d{3}\-?\d{4}$/,"en-IN":/^(\+?91|0)?[789]\d{9}$/,"en-NZ":/^(\+?64|0)2\d{7,9}$/,"en-ZA":/^(\+?27|0)\d{9}$/,"en-ZM":/^(\+?26)?09[567]\d{7}$/,"es-ES":/^(\+?34)?(6\d{1}|7[1234])\d{7}$/,"fi-FI":/^(\+?358|0)\s?(4(0|1|2|4|5)?|50)\s?(\d\s?){4,8}\d$/,"fr-FR":/^(\+?33|0)[67]\d{8}$/,"nb-NO":/^(\+?47)?[49]\d{7}$/,"nn-NO":/^(\+?47)?[49]\d{7}$/,"pt-BR":/^(\+?55|0)\-?[1-9]{2}\-?[2-9]{1}\d{3,4}\-?\d{4}$/,"pt-PT":/^(\+?351)?9[1236]\d{7}$/,"ru-RU":/^(\+?7|8)?9\d{9}$/,"vi-VN":/^(\+?84|0)?((1(2([0-9])|6([2-9])|88|99))|(9((?!5)[0-9])))([0-9]{7})$/,"zh-CN":/^(\+?0?86\-?)?((13\d|14[57]|15[^4,\D]|17[678]|18\d)\d{8}|170[059]\d{7})$/,"zh-TW":/^(\+?886\-?|0)?9\d{8}$/},$=/^([\+-]?\d{4}(?!\d{2}\b))((-?)((0[1-9]|1[0-2])(\3([12]\d|0[1-9]|3[01]))?|W([0-4]\d|5[0-2])(-?[1-7])?|(00[1-9]|0[1-9]\d|[12]\d{2}|3([0-5]\d|6[1-6])))([T\s]((([01]\d|2[0-3])((:?)[0-5]\d)?|24\:?00)([\.,]\d+(?!:))?)?(\17[0-5]\d([\.,]\d+)?)?([zZ]|([\+-])([01]\d|2[0-3]):?([0-5]\d)?)?)?)?$/;r.extend=function(e,t){r[e]=function(){var e=Array.prototype.slice.call(arguments);return e[0]=r.toString(e[0]),t.apply(r,e)}},r.init=function(){for(var e in r)"function"==typeof r[e]&&"toString"!==e&&"toDate"!==e&&"extend"!==e&&"init"!==e&&"isServerSide"!==e&&r.extend(e,r[e])},r.isServerSide=function(){return e&&"object"==typeof e.exports&&"object"==typeof t&&!0};var N=null;r.deprecation=function(e){if(null===N){if(!r.isServerSide())return;N=s(6)("validator")}N(e)},r.toString=function(e){if("string"!=typeof e){if(!r.coerce)throw new Error("this library validates strings only");r.deprecation("you tried to validate a "+typeof e+" but this library (validator.js) validates strings only. Please update your code as this will be an error soon.")}return"object"==typeof e&&null!==e?e="function"==typeof e.toString?e.toString():"[object Object]":(null==e||isNaN(e)&&!e.length)&&(e=""),""+e},r.toDate=function(e){return"[object Date]"===Object.prototype.toString.call(e)?e:(e=Date.parse(e),isNaN(e)?null:new Date(e))},r.toFloat=function(e){return parseFloat(e)},r.toInt=function(e,t){return parseInt(e,t||10)},r.toBoolean=function(e,t){return t?"1"===e||"true"===e:"0"!==e&&"false"!==e&&""!==e},r.equals=function(e,t){return e===r.toString(t)},r.contains=function(e,t){return e.indexOf(r.toString(t))>=0},r.matches=function(e,t,s){return"[object RegExp]"!==Object.prototype.toString.call(t)&&(t=new RegExp(t,s)),t.test(e)};var O={allow_display_name:!1,allow_utf8_local_part:!0,require_tld:!0};r.isEmail=function(e,t){if((t=H(t,O)).allow_display_name){var s=e.match(p);s&&(e=s[1])}var n=e.split("@"),u=n.pop(),d=n.join("@"),h=u.toLowerCase();if("gmail.com"!==h&&"googlemail.com"!==h||(d=d.replace(/\./g,"").toLowerCase()),!r.isByteLength(d,{max:64})||!r.isByteLength(u,{max:256}))return!1;if(!r.isFQDN(u,{require_tld:t.require_tld}))return!1;if('"'===d[0])return d=d.slice(1,d.length-1),t.allow_utf8_local_part?l.test(d):a.test(d);for(var c=t.allow_utf8_local_part?o:i,f=d.split("."),v=0;v<f.length;v++)if(!c.test(f[v]))return!1;return!0};var M={protocols:["http","https","ftp"],require_tld:!0,require_protocol:!1,require_valid_protocol:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_protocol_relative_urls:!1};r.isURL=function(e,t){if(!e||e.length>=2083||/\s/.test(e))return!1;if(0===e.indexOf("mailto:"))return!1;var s,n,i,a,o,l,p;if(t=H(t,M),(p=e.split("://")).length>1){if(s=p.shift(),t.require_valid_protocol&&-1===t.protocols.indexOf(s))return!1}else{if(t.require_protocol)return!1;t.allow_protocol_relative_urls&&"//"===e.substr(0,2)&&(p[0]=e.substr(2))}return e=p.join("://"),p=e.split("#"),e=p.shift(),p=e.split("?"),e=p.shift(),p=e.split("/"),e=p.shift(),!((p=e.split("@")).length>1&&(n=p.shift()).indexOf(":")>=0&&n.split(":").length>2||(a=p.join("@"),i=(p=a.split(":")).shift(),p.length&&(l=p.join(":"),o=parseInt(l,10),!/^[0-9]+$/.test(l)||o<=0||o>65535)||!r.isIP(i)&&!r.isFQDN(i,t)&&"localhost"!==i||t.host_whitelist&&-1===t.host_whitelist.indexOf(i)||t.host_blacklist&&-1!==t.host_blacklist.indexOf(i)))},r.isMACAddress=function(e){return f.test(e)},r.isIP=function(e,t){if(!(t=t?t+"":""))return r.isIP(e,4)||r.isIP(e,6);if("4"===t)return!!v.test(e)&&e.split(".").sort((function(e,t){return e-t}))[3]<=255;if("6"===t){var s=e.split(":"),n=!1,i=r.isIP(s[s.length-1],4),a=i?7:8;if(s.length>a)return!1;if("::"===e)return!0;"::"===e.substr(0,2)?(s.shift(),s.shift(),n=!0):"::"===e.substr(e.length-2)&&(s.pop(),s.pop(),n=!0);for(var o=0;o<s.length;++o)if(""===s[o]&&o>0&&o<s.length-1){if(n)return!1;n=!0}else if(i&&o==s.length-1);else if(!m.test(s[o]))return!1;return n?s.length>=1:s.length===a}return!1};var j={require_tld:!0,allow_underscores:!1,allow_trailing_dot:!1};r.isFQDN=function(e,t){(t=H(t,j)).allow_trailing_dot&&"."===e[e.length-1]&&(e=e.substring(0,e.length-1));var s=e.split(".");if(t.require_tld){var r=s.pop();if(!s.length||!/^([a-z\u00a1-\uffff]{2,}|xn[a-z0-9-]{2,})$/i.test(r))return!1}for(var n,i=0;i<s.length;i++){if(n=s[i],t.allow_underscores){if(n.indexOf("__")>=0)return!1;n=n.replace(/_/g,"")}if(!/^[a-z\u00a1-\uffff0-9-]+$/i.test(n))return!1;if(/[\uff01-\uff5e]/.test(n))return!1;if("-"===n[0]||"-"===n[n.length-1])return!1}return!0},r.isBoolean=function(e){return["true","false","1","0"].indexOf(e)>=0},r.isAlpha=function(e,t){if((t=t||"en-US")in b)return b[t].test(e);throw new Error("Invalid locale '"+t+"'")},r.isAlphanumeric=function(e,t){if((t=t||"en-US")in y)return y[t].test(e);throw new Error("Invalid locale '"+t+"'")},r.isNumeric=function(e){return q.test(e)},r.isDecimal=function(e){return""!==e&&F.test(e)},r.isHexadecimal=function(e){return I.test(e)},r.isHexColor=function(e){return C.test(e)},r.isLowercase=function(e){return e===e.toLowerCase()},r.isUppercase=function(e){return e===e.toUpperCase()},r.isInt=function(e,t){return t=t||{},E.test(e)&&(!t.hasOwnProperty("min")||e>=t.min)&&(!t.hasOwnProperty("max")||e<=t.max)},r.isFloat=function(e,t){return t=t||{},""!==e&&"."!==e&&A.test(e)&&(!t.hasOwnProperty("min")||e>=t.min)&&(!t.hasOwnProperty("max")||e<=t.max)},r.isDivisibleBy=function(e,t){return r.toFloat(e)%parseInt(t,10)==0},r.isNull=function(e){return 0===e.length},r.isLength=function(e,t){var s,r;"object"==typeof t?(s=t.min||0,r=t.max):(s=arguments[1],r=arguments[2]);var n=e.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g)||[],i=e.length-n.length;return i>=s&&(void 0===r||i<=r)},r.isByteLength=function(e,t){var s,r;"object"==typeof t?(s=t.min||0,r=t.max):(s=arguments[1],r=arguments[2]);var n=encodeURI(e).split(/%..|./).length-1;return n>=s&&(void 0===r||n<=r)},r.isUUID=function(e,t){var s=g[t||"all"];return s&&s.test(e)},r.isDate=function(e){var t=new Date(Date.parse(e));if(isNaN(t))return!1;var s=function(e){var t,s,r,n,i=e.match($);if(i){if(!(t=i[21]))return i[12]?null:0;if("z"===t||"Z"===t)return 0;s=i[22],-1!==t.indexOf(":")?(r=parseInt(i[23]),n=parseInt(i[24])):(r=0,n=parseInt(i[23]))}else{if(!(t=(e=e.toLowerCase()).match(/(?:\s|gmt\s*)(-|\+)(\d{1,4})(\s|$)/)))return-1!==e.indexOf("gmt")?0:null;s=t[1];var a=t[2];3===a.length&&(a="0"+a),a.length<=2?(r=0,n=parseInt(a)):(r=parseInt(a.slice(0,2)),n=parseInt(a.slice(2,4)))}return(60*r+n)*("-"===s?1:-1)}(e);if(null!==s){var r=t.getTimezoneOffset()-s;t=new Date(t.getTime()+6e4*r)}var n,i,a,o=String(t.getDate());return!(i=e.match(/(^|[^:\d])[23]\d([^:\d]|$)/g))||(n=i.map((function(e){return e.match(/\d+/g)[0]})).join("/"),a=String(t.getFullYear()).slice(-2),n===o||n===a||n===o+"/"+a||n===a+"/"+o)},r.isAfter=function(e,t){var s=r.toDate(t||new Date),n=r.toDate(e);return!!(n&&s&&n>s)},r.isBefore=function(e,t){var s=r.toDate(t||new Date),n=r.toDate(e);return!!(n&&s&&n<s)},r.isIn=function(e,t){var s;if("[object Array]"===Object.prototype.toString.call(t)){var n=[];for(s in t)n[s]=r.toString(t[s]);return n.indexOf(e)>=0}return"object"==typeof t?t.hasOwnProperty(e):!(!t||"function"!=typeof t.indexOf)&&t.indexOf(e)>=0},r.isWhitelisted=function(e,t){for(var s=e.length-1;s>=0;s--)if(-1===t.indexOf(e[s]))return!1;return!0},r.isCreditCard=function(e){var t=e.replace(/[^0-9]+/g,"");if(!u.test(t))return!1;for(var s,r,n,i=0,a=t.length-1;a>=0;a--)s=t.substring(a,a+1),r=parseInt(s,10),i+=n&&(r*=2)>=10?r%10+1:r,n=!n;return!(i%10!=0||!t)},r.isISIN=function(e){if(!d.test(e))return!1;for(var t,s,r=e.replace(/[A-Z]/g,(function(e){return parseInt(e,36)})),n=0,i=!0,a=r.length-2;a>=0;a--)t=r.substring(a,a+1),s=parseInt(t,10),n+=i&&(s*=2)>=10?s+1:s,i=!i;return parseInt(e.substr(e.length-1),10)===(1e4-n)%10},r.isISBN=function(e,t){if(!(t=t?t+"":""))return r.isISBN(e,10)||r.isISBN(e,13);var s,n=e.replace(/[\s-]+/g,""),i=0;if("10"===t){if(!h.test(n))return!1;for(s=0;s<9;s++)i+=(s+1)*n.charAt(s);if("X"===n.charAt(9)?i+=100:i+=10*n.charAt(9),i%11==0)return!!n}else if("13"===t){if(!c.test(n))return!1;var a=[1,3];for(s=0;s<12;s++)i+=a[s%2]*n.charAt(s);if(n.charAt(12)-(10-i%10)%10==0)return!!n}return!1},r.isMobilePhone=function(e,t){return t in T&&T[t].test(e)};var R={symbol:"$",require_symbol:!1,allow_space_after_symbol:!1,symbol_after_digits:!1,allow_negatives:!0,parens_for_negatives:!1,negative_sign_before_digits:!1,negative_sign_after_digits:!1,allow_negative_sign_placeholder:!1,thousands_separator:",",decimal_separator:".",allow_space_after_digits:!1};r.isCurrency=function(e,t){return function(e){var t="(\\"+e.symbol.replace(/\./g,"\\.")+")"+(e.require_symbol?"":"?"),s="[1-9]\\d{0,2}(\\"+e.thousands_separator+"\\d{3})*",r="("+["0","[1-9]\\d*",s].join("|")+")?",n="(\\"+e.decimal_separator+"\\d{2})?",i=r+n;return e.allow_negatives&&!e.parens_for_negatives&&(e.negative_sign_after_digits?i+="-?":e.negative_sign_before_digits&&(i="-?"+i)),e.allow_negative_sign_placeholder?i="( (?!\\-))?"+i:e.allow_space_after_symbol?i=" ?"+i:e.allow_space_after_digits&&(i+="( (?!$))?"),e.symbol_after_digits?i+=t:i=t+i,e.allow_negatives&&(e.parens_for_negatives?i="(\\("+i+"\\)|"+i+")":e.negative_sign_before_digits||e.negative_sign_after_digits||(i="-?"+i)),new RegExp("^(?!-? )(?=.*\\d)"+i+"$")}(t=H(t,R)).test(e)},r.isJSON=function(e){try{var t=JSON.parse(e);return!!t&&"object"==typeof t}catch(e){}return!1},r.isMultibyte=function(e){return _.test(e)},r.isAscii=function(e){return S.test(e)},r.isFullWidth=function(e){return P.test(e)},r.isHalfWidth=function(e){return k.test(e)},r.isVariableWidth=function(e){return P.test(e)&&k.test(e)},r.isSurrogatePair=function(e){return B.test(e)},r.isBase64=function(e){return D.test(e)},r.isMongoId=function(e){return r.isHexadecimal(e)&&24===e.length},r.isISO8601=function(e){return $.test(e)},r.ltrim=function(e,t){var s=t?new RegExp("^["+t+"]+","g"):/^\s+/g;return e.replace(s,"")},r.rtrim=function(e,t){var s=t?new RegExp("["+t+"]+$","g"):/\s+$/g;return e.replace(s,"")},r.trim=function(e,t){var s=t?new RegExp("^["+t+"]+|["+t+"]+$","g"):/^\s+|\s+$/g;return e.replace(s,"")},r.escape=function(e){return e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\//g,"&#x2F;").replace(/\`/g,"&#96;")},r.stripLow=function(e,t){var s=t?"\\x00-\\x09\\x0B\\x0C\\x0E-\\x1F\\x7F":"\\x00-\\x1F\\x7F";return r.blacklist(e,s)},r.whitelist=function(e,t){return e.replace(new RegExp("[^"+t+"]+","g"),"")},r.blacklist=function(e,t){return e.replace(new RegExp("["+t+"]+","g"),"")};var L={lowercase:!0,remove_dots:!0,remove_extension:!0};function H(e,t){for(var s in e=e||{},t)void 0===e[s]&&(e[s]=t[s]);return e}return r.normalizeEmail=function(e,t){if(t=H(t,L),!r.isEmail(e))return!1;var s=e.split("@",2);if(s[1]=s[1].toLowerCase(),"gmail.com"===s[1]||"googlemail.com"===s[1]){if(t.remove_extension&&(s[0]=s[0].split("+")[0]),t.remove_dots&&(s[0]=s[0].replace(/\./g,"")),!s[0].length)return!1;s[0]=s[0].toLowerCase(),s[1]="gmail.com"}else t.lowercase&&(s[0]=s[0].toLowerCase());return s.join("@")},r.init(),r}()}).call(this,s(4)(e),s(5))},function(e,t){e.exports={3:"break",8:"backspaceDelete",9:"tab",12:"clear",13:"enter",16:"shift",17:"ctrl",18:"alt",19:"pauseBreak",20:"capsLock",27:"escape",32:"spacebar",33:"pageUp",34:"pageDown",35:"end",36:"home",37:"leftArrow",38:"upArrow",39:"rightArrow",40:"downArrow",41:"select",42:"print",43:"execute",44:"printScreen",45:"insert",46:"delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",91:"windowsKeyLeftCMD",92:"windowsKeyRight",93:"windowsKeyRightCMD",96:"numpad0",97:"numpad1",98:"numpad2",99:"numpad3",100:"numpad4",101:"numpad5",102:"numpad6",103:"numpad7",104:"numpad8",105:"numpad9",106:"multiply",107:"add",109:"subtract",110:"decimalPoint",111:"divide",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",124:"f13",125:"f14",126:"f15",127:"f16",128:"f17",129:"f18",130:"f19",144:"numLock",145:"scrollLock",173:"toggleMute",174:"decreaseVolume",175:"increaseVolume",181:"fireboxToggleMute",182:"firefoxDecreaseVolume",183:"firefoxIncreaseVolume",186:"semiColon",187:"equalSign",188:"comma",189:"dash",190:"period",191:"forwardSlash",192:"graveAccent",219:"openBracket",220:"backSlash",221:"closeBracket",222:"singleQuote",224:"firefoxCMD",225:"altgr",255:"toggleTouchpad"}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t){var s,r,n=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function o(e){if(s===setTimeout)return setTimeout(e,0);if((s===i||!s)&&setTimeout)return s=setTimeout,setTimeout(e,0);try{return s(e,0)}catch(t){try{return s.call(null,e,0)}catch(t){return s.call(this,e,0)}}}!function(){try{s="function"==typeof setTimeout?setTimeout:i}catch(e){s=i}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var l,p=[],u=!1,d=-1;function h(){u&&l&&(u=!1,l.length?p=l.concat(p):d=-1,p.length&&c())}function c(){if(!u){var e=o(h);u=!0;for(var t=p.length;t;){for(l=p,p=[];++d<t;)l&&l[d].run();d=-1,t=p.length}l=null,u=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function v(){}n.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var s=1;s<arguments.length;s++)t[s-1]=arguments[s];p.push(new f(e,t)),1!==p.length||u||o(c)},f.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=v,n.addListener=v,n.once=v,n.off=v,n.removeListener=v,n.removeAllListeners=v,n.emit=v,n.prependListener=v,n.prependOnceListener=v,n.listeners=function(e){return[]},n.binding=function(e){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},function(e,t,s){"use strict";
/*!
 * depd
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */function r(e,t){if("function"!=typeof e)throw new TypeError("argument fn must be a function");return e}function n(e,t,s){if(!e||"object"!=typeof e&&"function"!=typeof e)throw new TypeError("argument obj must be object");var r=Object.getOwnPropertyDescriptor(e,t);if(!r)throw new TypeError("must call property on owner object");if(!r.configurable)throw new TypeError("property must be configurable")}e.exports=function(e){if(!e)throw new TypeError("argument namespace is required");function t(e){}return t._file=void 0,t._ignored=!0,t._namespace=e,t._traced=!1,t._warned=Object.create(null),t.function=r,t.property=n,t}},function(e,t,s){"use strict";s.r(t);var r={};s.r(r),s.d(r,"default",(function(){return g}));var n=s(0),i=s.n(n),a=s(1),o=s.n(a),l=s(3),p=s.n(l),u=s(2),d=s.n(u),h={isAccepted:(e,t)=>e==t,isAllIn:(e,t)=>!!e&&o.a.every(e,e=>t.indexOf(e)>-1)},c=(e,t,s)=>{var r=void 0!==h[t.type]?h[t.type]:d.a.hasOwnProperty(t.type)&&"function"==typeof d.a[t.type]?d.a[t.type]:void 0;if(!r)throw new Error('Winterfell: Attempted to validate for undefined method "'+t.type+'"');var n=(t.params||[]).slice(0);return(n=n.map(e=>"string"==typeof e?((e,t)=>{t=t||{};for(var s=(e=e||"").split(""),r="",n="",i=!1,a=0;a<s.length;a++){var o=s[a];if(i||"{"==o||"}"==o){if("{"==o&&(i=!0),"{"!=o&&"}"!=o&&(r+=o),"}"==o){var l="";void 0!==t[r]&&(l=t[r]),n+=l,i=!1,r=""}}else n+=o}return n})(e,s):e)).unshift(e),r.apply(null,n)},f=(e,t,s)=>(s=s||[],e.forEach(e=>{s.push({questionId:e.questionId,validations:e.validations}),void 0!==e.input.options&&0!==e.input.options.length&&e.input.options.forEach(r=>{void 0!==r.conditionalQuestions&&0!=r.conditionalQuestions.length&&t[e.questionId]==r.value&&(s=f(r.conditionalQuestions,t,s))})}),s),v=(e,t)=>{var s=[];return e.forEach(e=>Array.prototype.push.apply(s,f(e.questions,t))),s},m=(e,t)=>{if("string"!=typeof e)throw new Error("Winterfell: First parameter of addValidationMethod must be of type string");if("function"!=typeof t)throw new Error("Winterfell: Second parameter of addValidationMethod must be of type function");h[e]=t},g={validateAnswer:c,getActiveQuestions:f,getActiveQuestionsFromQuestionSets:v,getQuestionPanelInvalidQuestions:(e,t)=>{var s=v(e,t).filter(e=>e.validations instanceof Array&&e.validations.length>0),r={};return s.forEach(({questionId:e,validations:s})=>[].forEach.bind(s,s=>{c(t[e],s,t)||(void 0===r[e]&&(r[e]=[]),r[e].push(s))})()),r},addValidationMethod:m,addValidationMethods:e=>{if("object"!=typeof e)throw new Error("Winterfell: First parameter of addValidationMethods must be of type object");for(var t in e)m(t,e[t])}},b={default:"Please correct the field below",isLength:e=>{switch(e.params.length){case 1:return"Please enter a value with at least "+e.params[0]+" character"+(1!=e.params[0]?"s":"");case 2:return"Please enter a value between "+e.params[0]+" and "+e.params[1]+" characters long";default:return b.default}return errorMessage},isEmail:"Please enter a valid email address",contains:e=>'Please enter a value that contains "'+e.params[0]+'"',equals:e=>"Value must equal "+e.params[0],isAlpha:"Please only enter letters",isAlphanumeric:"Please only enter letters and numbers",isCreditCard:"Please enter a valid credit card number",isCurrency:"Please enter a current value only",isDate:"Please enter a valid date",isDecimal:"Please enter a decimal value only",isFloat:"Please enter a float value only",isIP:"Please enter a valid IP address",isIn:"Please enter one of the allowed values",isAllIn:"Please enter one of the allowed values",isJSON:"Please enter a valid JSON string",isLowercase:"Please enter lowercase characters only",isUppercase:"Please enter uppercase characters only",isMobilePhone:"Please enter a valid mobile number",isMongoId:"Please enter a valid MongoId",isNumeric:"Please enter numbers only",isURL:"Please enter a valid URL",isAccepted:"Please accept by clicking the checkbox",addErrorMessage:(e,t)=>{if("string"!=typeof e)throw new Error("Winterfell: First parameter of addErrorMessage must be of type string");if("function"!=typeof t&&"string"!=typeof t)throw new Error("Winterfell: Second parameter of addErrorMessage must be of type function or string");y(e,t)},addErrorMessages:e=>{if("object"!=typeof e)throw new Error("Winterfell: First parameter of addErrorMessages must be of type object");for(let t in e)b.addErrorMessage(t,e[t])},getErrorMessage:e=>{var t=void 0!==e.message?e.message:void 0!==b[e.type]?b[e.type]:b.default;return"function"==typeof t?t(e):t}},y=(e,t)=>{b[e]=t},w=b;class x extends i.a.Component{handleClick(e){e.preventDefault(),this.props.onClick()}render(){return i.a.createElement("button",{href:"#",className:this.props.className,onClick:this.handleClick.bind(this)},this.props.text)}}x.defaultProps={text:"Submit",className:void 0,onClick:()=>{}};var q=x;class E extends i.a.Component{constructor(e){super(e),this.state={checked:e.defaultChecked}}handleChange(e){e?this.setState({checked:!this.state.checked},()=>{this.props.onChange(this.state.checked?this.props.value:void 0)}):this.props.onChange(this.state.checked?this.props.value:void 0)}componentDidMount(){this.state.checked&&this.handleChange()}render(){return i.a.createElement("div",{className:this.props.classes.checkboxInput},i.a.createElement("label",{className:this.props.classes.checkboxLabel,id:this.props.labelId},i.a.createElement("input",{type:"checkbox",name:this.props.name,"aria-labelledby":this.props.labelId,className:this.props.classes.checkbox,defaultChecked:this.state.checked,value:this.props.value,required:this.props.required?"required":void 0,onChange:this.handleChange.bind(this),onBlur:this.props.onBlur.bind(null,this.state.checked?this.props.value:void 0)}),this.props.text))}}E.defaultProps={text:"",defaultChecked:!1,classes:{},name:"",value:"",onChange:()=>{},onBlur:()=>{}};var A=E;class I extends i.a.Component{constructor(e){var t;super(e),this.state={value:this.props.value.length>0?(t=this.props.value,t.slice(0)):[]}}handleChange(e,t){var s=this.state.value;t.target.checked?s.push(e):s=s.filter(t=>t!=e),this.setState({value:s},this.props.onChange.bind(null,s))}render(){return i.a.createElement("ul",{className:this.props.classes.checkboxList},this.props.options.map(e=>i.a.createElement("li",{key:e.value,className:this.props.classes.checkboxListItem},i.a.createElement("label",{className:this.props.classes.checkboxLabel,id:this.props.labelId},i.a.createElement("input",{type:"checkbox",name:this.props.name,"aria-labelledby":this.props.labelId,value:e.value,checked:this.state.value.indexOf(e.value)>-1,className:this.props.classes.checkbox,required:this.props.required?"required":void 0,onChange:this.handleChange.bind(this,e.value),onBlur:this.props.onBlur.bind(null,this.state.value)}),e.text))))}}I.defaultProps={classes:{},name:"",value:[],options:[],onChange:()=>{},onBlur:()=>{}};var F=I;class C extends i.a.Component{constructor(e){super(e),this.state={value:this.props.value}}handleChange(e){this.setState({value:e.target.value},this.props.onChange.bind(null,e.target.value))}render(){return i.a.createElement("input",{type:"email",name:this.props.name,id:this.props.id,"aria-labelledby":this.props.labelId,className:this.props.classes.input,placeholder:this.props.placeholder,value:this.state.value,required:this.props.required?"required":void 0,onChange:this.handleChange.bind(this),onBlur:this.props.onBlur.bind(null,this.state.value),onKeyDown:this.props.onKeyDown})}}C.defaultProps={classes:{},name:"",id:"",value:"",placeholder:"",onChange:()=>{},onBlur:()=>{},onKeyDown:()=>{}};var S=C;class _ extends i.a.Component{constructor(e){super(e),this.state={value:this.props.value}}handleChange(e){this.setState({value:e.target.value},this.props.onChange.bind(null,e.target.value))}render(){return i.a.createElement("input",{type:"file",name:this.props.name,id:this.props.id,"aria-labelledby":this.props.labelId,className:this.props.classes.file,required:this.props.required?"required":void 0,onChange:this.handleChange.bind(this),onBlur:this.props.onBlur.bind(null,this.state.value)})}}_.defaultProps={classes:{},name:"",id:"",value:"",onChange:()=>{},onBlur:()=>{}};var P=_;class k extends i.a.Component{constructor(e){super(e),this.state={value:this.props.value}}render(){return i.a.createElement("input",{type:"hidden",name:this.props.name,value:this.state.value})}}k.defaultProps={name:"",value:""};var B=k;class D extends i.a.Component{constructor(e){super(e),this.state={value:this.props.value}}handleChange(e){this.setState({value:e.target.value},this.props.onChange.bind(null,e.target.value))}render(){return i.a.createElement("input",{type:"password",name:this.props.name,id:this.props.id,"aria-labelledby":this.props.labelId,className:this.props.classes.input,placeholder:this.props.placeholder,value:this.state.value,required:this.props.required?"required":void 0,onChange:this.handleChange.bind(this),onBlur:this.props.onBlur.bind(null,this.state.value),onKeyDown:this.props.onKeyDown})}}D.defaultProps={classes:{},name:"",id:"",value:"",placeholder:"",onChange:()=>{},onBlur:()=>{},onKeyDown:()=>{}};var T=D;class $ extends i.a.Component{constructor(e){super(e),this.state={value:this.props.value}}handleChange(e){this.setState({value:e},this.props.onChange.bind(null,e))}render(){return i.a.createElement("ul",{className:this.props.classes.radioList},this.props.options.map(e=>i.a.createElement("li",{key:e.value,className:this.props.classes.radioListItem},i.a.createElement("label",{className:this.props.classes.radioLabel,id:this.props.labelId},i.a.createElement("input",{type:"radio",name:this.props.name,"aria-labelledby":this.props.labelId,checked:this.state.value==e.value,className:this.props.classes.radio,required:this.props.required?"required":void 0,onChange:this.handleChange.bind(this,e.value),onBlur:this.props.onBlur.bind(null,this.state.value)}),e.text))))}}$.defaultProps={classes:{},name:"",value:"",options:[],onChange:()=>{},onBlur:()=>{}};var N=$;class O extends i.a.Component{constructor(e){super(e),this.state={value:this.props.value}}handleChange(e){this.setState({value:e.target.value},this.props.onChange.bind(null,e.target.value))}render(){var e=this.props.options.map(e=>i.a.createElement("option",{key:e.value,value:e.value},e.text));return i.a.createElement("select",{name:this.props.name,id:this.props.id,className:this.props.classes.select,value:this.state.value,ref:"select",required:this.props.required?"required":void 0,onChange:this.handleChange.bind(this),onBlur:this.props.onBlur.bind(null,this.state.value)},e)}componentDidMount(){this.handleChange({target:{value:this.refs.select.value}})}}O.defaultProps={classes:{},name:"",id:"",value:"",options:[],onChange:()=>{},onBlur:()=>{}};var M=O;class j extends i.a.Component{constructor(e){super(e),this.state={value:this.props.value}}handleChange(e){this.setState({value:e.target.value},this.props.onChange.bind(null,e.target.value))}render(){return i.a.createElement("textarea",{type:"text",name:this.props.name,id:this.props.id,"aria-labelledby":this.props.labelId,className:this.props.classes.input,placeholder:this.props.placeholder,value:this.state.value,required:this.props.required?"required":void 0,onChange:this.handleChange.bind(this),onBlur:this.props.onBlur.bind(null,this.state.value)})}}j.defaultProps={classes:{},name:"",id:"",value:"",placeholder:"",onChange:()=>{},onBlur:()=>{}};var R=j;class L extends i.a.Component{constructor(e){super(e),this.state={value:this.props.value}}handleChange(e){this.setState({value:e.target.value},this.props.onChange.bind(null,e.target.value))}render(){return i.a.createElement("input",{type:"text",name:this.props.name,id:this.props.id,"aria-labelledby":this.props.labelId,className:this.props.classes.input,placeholder:this.props.placeholder,value:this.state.value,required:this.props.required?"required":void 0,onChange:this.handleChange.bind(this),onBlur:this.props.onBlur.bind(null,this.state.value),onKeyDown:this.props.onKeyDown})}}L.defaultProps={classes:{},name:"",id:"",value:"",placeholder:"",onChange:()=>{},onBlur:()=>{},onKeyDown:()=>{}};let H={checkboxInput:A,checkboxOptionsInput:F,emailInput:S,fileInput:P,hiddenInput:B,passwordInput:T,radioOptionsInput:N,selectInput:M,textareaInput:R,textInput:L,addInputType:(e,t)=>{if("string"!=typeof e)throw new Error("Winterfell: First parameter of addInputType must be of type string");if(!i.a.Component instanceof t.constructor)throw new Error('Winterfell: Cannot not assign "'+e+'" as an inputType. Second paramter expects a React component');H[e]=t},addInputTypes:e=>{if("object"!=typeof e)throw new Error("Winterfell: First parameter of addInputTypes must be of type object");for(var t in e)H.addInputType(t,e[t])}};var Z=H;function Q(){return(Q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e}).apply(this,arguments)}class K extends i.a.Component{handleInputChange(e,t){this.props.onAnswerChange(e,t,this.props.validations,this.props.validateOn)}handleInputBlur(e,t){this.props.onQuestionBlur(e,t,this.props.validations,this.props.validateOn)}render(){var e=Z[this.props.input.type];if(!e)throw new Error('Winterfell: Input Type "'+this.props.input.type+'" not defined as Winterfell Input Type');var t=[];void 0!==this.props.input.options&&this.props.input.options.filter(e=>this.props.value instanceof Array?this.props.value.indexOf(e.value)>-1:this.props.value==e.value).filter(e=>void 0!==e.conditionalQuestions&&e.conditionalQuestions.length>0).forEach(e=>[].forEach.bind(e.conditionalQuestions,e=>{t.push(i.a.createElement(K,{key:e.questionId,questionSetId:this.props.questionSetId,questionId:e.questionId,question:e.question,text:e.text,postText:e.postText,validateOn:e.validateOn,validations:e.validations,value:this.props.questionAnswers[e.questionId],input:e.input,classes:this.props.classes,renderError:this.props.renderError,questionAnswers:this.props.questionAnswers,validationErrors:this.props.validationErrors,onAnswerChange:this.props.onAnswerChange,onQuestionBlur:this.props.onQuestionBlur,onKeyDown:this.props.onKeyDown}))})());var s=void 0!==this.props.value?this.props.value:void 0!==this.props.input.default?this.props.input.default:void 0,r=void 0!==this.props.validationErrors[this.props.questionId]?this.props.validationErrors[this.props.questionId].map(e=>"function"==typeof this.props.renderError?this.props.renderError(e,this.props.questionId):i.a.createElement("div",{key:this.props.questionId+"Error"+e.type,className:this.props.classes.errorMessage},e.message)):[];let n=this.props.questionId+"-label";return i.a.createElement("div",{className:this.props.classes.question},this.props.question?i.a.createElement("label",{className:this.props.classes.label,id:n,htmlFor:this.props.questionId},this.props.question,void 0!==this.props.renderRequiredAsterisk&&this.props.input.required?this.props.renderRequiredAsterisk():void 0):void 0,this.props.text?i.a.createElement("p",{className:this.props.classes.questionText},this.props.text):void 0,r,i.a.createElement(e,Q({name:this.props.questionId,id:this.props.questionId,labelId:n,value:s,text:this.props.input.text,options:this.props.input.options,placeholder:this.props.input.placeholder,required:this.props.input.required,classes:this.props.classes,onChange:this.handleInputChange.bind(this,this.props.questionId),onBlur:this.handleInputBlur.bind(this,this.props.questionId),onKeyDown:this.props.onKeyDown},"object"==typeof this.props.input.props?this.props.input.props:{})),this.props.postText?i.a.createElement("p",{className:this.props.classes.questionPostText},this.props.postText):void 0,t)}componentDidMount(){void 0===this.props.input.default||"checkboxInput"===this.props.input.type&&void 0===this.props.questionAnswers[this.props.questionId]||this.handleInputChange.call(this,this.props.questionId,this.props.input.default)}}K.defaultProps={questionSetId:void 0,questionId:void 0,question:"",validateOn:"blur",validations:[],text:void 0,postText:void 0,value:void 0,input:{default:void 0,type:"textInput",limit:void 0,placeholder:void 0},classes:{},questionAnswers:{},validationErrors:{},onAnswerChange:()=>{},onQuestionBlur:()=>{},onKeyDown:()=>{},renderError:void 0,renderRequiredAsterisk:void 0};var U=K;class W extends i.a.Component{render(){var e=this.props.questions.map(e=>i.a.createElement(U,{key:e.questionId,questionSetId:this.props.id,questionId:e.questionId,question:e.question,validateOn:e.validateOn,validations:e.validations,text:e.text,postText:e.postText,value:this.props.questionAnswers[e.questionId],input:e.input,classes:this.props.classes,renderError:this.props.renderError,renderRequiredAsterisk:this.props.renderRequiredAsterisk,questionAnswers:this.props.questionAnswers,validationErrors:this.props.validationErrors,onAnswerChange:this.props.onAnswerChange,onQuestionBlur:this.props.onQuestionBlur,onKeyDown:this.props.onKeyDown}));return i.a.createElement("div",{className:this.props.classes.questionSet},void 0!==this.props.questionSetHeader||void 0!==this.props.questionSetText?i.a.createElement("div",{className:this.props.classes.questionSetHeaderContainer},void 0!==this.props.questionSetHeader?i.a.createElement("h4",{className:this.props.classes.questionSetHeader},this.props.questionSetHeader):void 0,void 0!==this.props.questionSetText?i.a.createElement("p",{className:this.props.classes.questionSetText},this.props.questionSetText):void 0):void 0,e)}}W.defaultProps={id:void 0,name:"",questionSetHeader:void 0,questionSetText:void 0,questions:[],questionAnswers:{},classes:{},validationErrors:{},renderError:void 0,renderRequiredAsterisk:void 0,onAnswerChange:()=>{},onQuestionBlur:()=>{},onKeyDown:()=>{}};var V=W;class z extends i.a.Component{constructor(e){super(e),this.state={validationErrors:this.props.validationErrors}}handleAnswerValidate(e,t,s){if(void 0!==s&&0!==s.length){var r=[];s.forEach(e=>{g.validateAnswer(t,e,this.props.questionAnswers)||r.push({type:e.type,message:w.getErrorMessage(e)})});var n=o.a.chain(this.state.validationErrors).set(e,r).value();this.setState({validationErrors:n})}}handleMainButtonClick(){var e=this.props.action.default,t=this.props.action.conditions||[],s=this.props.questionSets.map(e=>e.questionSetId),r=o.a.chain(this.props.schema.questionSets).filter(e=>s.indexOf(e.questionSetId)>-1).value(),n=g.getQuestionPanelInvalidQuestions(r,this.props.questionAnswers);if(Object.keys(n).length>0){var i=o.a.mapValues(n,e=>e.map(e=>({type:e.type,message:w.getErrorMessage(e)})));this.setState({validationErrors:i})}else switch(t.forEach(t=>{var s=this.props.questionAnswers[t.questionId];e=s==t.value?{action:t.action,target:t.target}:e}),e.action){case"GOTO":this.props.onSwitchPanel(e.target);break;case"SUBMIT":this.props.onSubmit(e.target)}}handleBackButtonClick(){0!=this.props.panelHistory.length&&this.props.onPanelBack()}handleAnswerChange(e,t,s,r){this.props.onAnswerChange(e,t),this.setState({validationErrors:o.a.chain(this.state.validationErrors).set(e,[]).value()}),"change"===r&&this.handleAnswerValidate(e,t,s)}handleQuestionBlur(e,t,s,r){"blur"===r&&this.handleAnswerValidate(e,t,s)}handleInputKeyDown(e){"enter"===p.a[e.keyCode]&&(e.preventDefault(),this.handleMainButtonClick.call(this))}render(){var e=this.props.questionSets.map(e=>{var t=o.a.find(this.props.schema.questionSets,{questionSetId:e.questionSetId});if(t)return i.a.createElement(V,{key:t.questionSetId,id:t.questionSetId,name:t.name,questionSetHeader:t.questionSetHeader,questionSetText:t.questionSetText,questions:t.questions,classes:this.props.classes,questionAnswers:this.props.questionAnswers,renderError:this.props.renderError,renderRequiredAsterisk:this.props.renderRequiredAsterisk,validationErrors:this.state.validationErrors,onAnswerChange:this.handleAnswerChange.bind(this),onQuestionBlur:this.handleQuestionBlur.bind(this),onKeyDown:this.handleInputKeyDown.bind(this)})});return i.a.createElement("div",{className:this.props.classes.questionPanel},void 0!==this.props.panelHeader||void 0!==this.props.panelText?i.a.createElement("div",{className:this.props.classes.questionPanelHeaderContainer},void 0!==this.props.panelHeader?i.a.createElement("h3",{className:this.props.classes.questionPanelHeaderText},this.props.panelHeader):void 0,void 0!==this.props.panelText?i.a.createElement("p",{className:this.props.classes.questionPanelText},this.props.panelText):void 0):void 0,i.a.createElement("div",{className:this.props.classes.questionSets},e),i.a.createElement("div",{className:this.props.classes.buttonBar},this.props.panelHistory.length>1&&!this.props.backButton.disabled?i.a.createElement(q,{text:this.props.backButton.text||"Back",onClick:this.handleBackButtonClick.bind(this),className:this.props.classes.backButton}):void 0,this.props.button.disabled?void 0:i.a.createElement(q,{text:this.props.button.text,onClick:this.handleMainButtonClick.bind(this),className:this.props.classes.controlButton})))}}z.defaultProps={validationErrors:{},schema:{},classes:{},panelId:void 0,panelIndex:void 0,panelHeader:void 0,panelText:void 0,action:{default:{},conditions:[]},button:{text:"Submit"},backButton:{text:"Back"},questionSets:[],questionAnswers:{},renderError:void 0,renderRequiredAsterisk:void 0,onAnswerChange:()=>{},onSwitchPanel:()=>{},onPanelBack:()=>{},panelHistory:[]};var G=z;class J extends i.a.Component{constructor(e){super(e),this.formComponent=null,this.panelHistory=[];var t=o.a.extend({classes:{},formPanels:[],questionPanels:[],questionSets:[]},e.schema);t.formPanels=t.formPanels.sort((e,t)=>e.index>t.index);var s=void 0!==e.panelId?e.panelId:t.formPanels.length>0?t.formPanels[0].panelId:void 0,r=void 0!==t&&void 0!==t.formPanels&&void 0!==s?o.a.find(t.formPanels,e=>e.panelId==s):void 0;if(!r)throw new Error("Winterfell: Could not find initial panel and failed to render.");this.state={schema:t,currentPanel:r,action:e.action,questionAnswers:e.questionAnswers,panelId:e.panelId}}componentWillReceiveProps(e){if(void 0!==e.panelId){this.setState({action:e.action,schema:e.schema,questionAnswers:e.questionAnswers,panelId:e.panelId});var t=o.a.find(this.props.schema.formPanels,{panelId:e.panelId});t&&this.setState({currentPanel:t},this.props.onSwitchPanel.bind(null,t))}else this.setState({action:e.action,schema:e.schema,questionAnswers:e.questionAnswers})}handleAnswerChange(e,t){var s=o.a.chain(this.state.questionAnswers).set(e,t).value();this.setState({questionAnswers:s},this.props.onUpdate.bind(null,s))}handleSwitchPanel(e,t){var s=o.a.find(this.props.schema.formPanels,{panelId:e});if(!s)throw new Error('Winterfell: Tried to switch to panel "'+e+'", which does not exist.');t||this.panelHistory.push(s.panelId),this.setState({currentPanel:s},this.props.onSwitchPanel.bind(null,s))}handleBackButtonClick(){this.panelHistory.pop(),this.handleSwitchPanel.call(this,this.panelHistory[this.panelHistory.length-1],!0)}handleSubmit(e){this.props.disableSubmit?this.props.onSubmit(this.state.questionAnswers,e):this.setState({action:e},()=>{this.formComponent&&this.formComponent.submit()})}render(){var e=o.a.find(this.state.schema.questionPanels,e=>e.panelId==this.state.currentPanel.panelId);return i.a.createElement("form",{method:this.props.method,encType:this.props.encType,action:this.state.action,ref:e=>this.formComponent=e,className:this.state.schema.classes.form},i.a.createElement("div",{className:this.state.schema.classes.questionPanels},i.a.createElement(G,{schema:this.state.schema,classes:this.state.schema.classes,panelId:e.panelId,panelIndex:e.panelIndex,panelHeader:e.panelHeader,panelText:e.panelText,action:e.action,button:e.button,backButton:e.backButton,questionSets:e.questionSets,questionAnswers:this.state.questionAnswers,panelHistory:this.panelHistory,renderError:this.props.renderError,renderRequiredAsterisk:this.props.renderRequiredAsterisk,onAnswerChange:this.handleAnswerChange.bind(this),onPanelBack:this.handleBackButtonClick.bind(this),onSwitchPanel:this.handleSwitchPanel.bind(this),onSubmit:this.handleSubmit.bind(this)})))}componentDidMount(){this.panelHistory.push(this.state.currentPanel.panelId),this.props.onRender()}}J.inputTypes=Z,J.errorMessages=w,J.validation=r,J.addInputType=J.inputTypes.addInputType,J.addInputTypes=J.inputTypes.addInputTypes,J.addErrorMessage=J.errorMessages.addErrorMessage,J.addErrorMessages=J.errorMessages.addErrorMessages,J.addValidationMethod=J.validation.addValidationMethod,J.addValidationMethods=J.validation.addValidationMethods,J.defaultProps={questionAnswers:{},encType:"application/x-www-form-urlencoded",method:"POST",action:"",panelId:void 0,disableSubmit:!1,renderError:void 0,renderRequiredAsterisk:void 0,onSubmit:()=>{},onUpdate:()=>{},onSwitchPanel:()=>{},onRender:()=>{}};t.default=J}])}));